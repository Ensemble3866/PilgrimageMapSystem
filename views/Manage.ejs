<!DOCTYPE html>
<html lang="en" style="height: 100%;">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>聖地足跡/來一趟專屬於你的動漫聖地巡禮吧！</title>
		<!-- Bootstrap -->
		<link href="stylesheets/bootstrap.min.css" rel="stylesheet">
		<style>
body {
	padding-top: 50px;
}
p { 
	line-height: 1.7em;
	margin-after: 0.5em;
	text-align: justify; 
    text-justify: inter-ideographic;
	word-break: break-all;
}
.center-block {
  display: block;
  margin-left: auto;
  margin-right: auto;
}
.show {
  display: block !important;
}
.hidden {
  display: none !important;
  visibility: hidden !important;
}
.invisible {
  visibility: hidden;
}
		</style>
		<!-- jQuery (Bootstrap 所有外掛均需要使用) -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
		<!-- 依需要參考已編譯外掛版本（如下），或各自獨立的外掛版本 -->
		<script src="javascripts/bootstrap.min.js"></script>
		<script type="text/javascript">

function init(){

	$("input[name=rdoWork]").click(function(){
		if($('input[name=rdoWork]:checked').val() != "add"){
			$("#selectEditWork").attr("disabled", false);
			$("#selectEditWork").trigger("change");
		}
		else{
			$("#selectEditWork").attr("disabled", true);
		}
	});
	$("input[name=rdoScene]").click(function(){
		if($('input[name=rdoScene]:checked').val() != "add"){
			$("#selectEditScene").attr("disabled", false);
			$("#selectEditScene").trigger("change");
		}
		else{
			$("#selectEditScene").attr("disabled", true);
		}
	});
	
	$("#selectEditWork").change(function(){
		$.post("/manage/getWorkInfo", {
			workId : $("#selectEditWork").val()
		}, function(data, status){
			if(status=="success"){
				$("input[name=workJName]").val(data.j_name);
				$("input[name=workCName]").val(data.c_name);
				$("input[name=workEName]").val(data.e_name);
				$("textarea[name=workIntr]").val(data.introduction);
			}
		});
	});
	$("#selectEditScene").change(function(){
		$.post("/manage/getSceneInfo", {
			sceneId : $("#selectEditScene").val()
		}, function(data, status){
			if(status=="success"){
				$("input[name=sceneName]").val(data.name);
				$("input[name=latNum]").val(data.latitude);
				$("input[name=lngNum]").val(data.longitude);
				$("textarea[name=sceneDesc]").val(data.description);
			}
		});
	});

	showForm(1);
	$("#rdoWorkAdd").attr("checked", true);
	$("#rdoSceneAdd").attr("checked", true);

};

function showForm(num) {
	switch(num) {
		case 1: $("#formWork").fadeIn();
				$("#formScene").hide();
				$("#formBuildPlacemark").hide();
				break;
		case 2: $("#formWork").hide();
				$("#formScene").fadeIn();
				$("#formBuildPlacemark").hide();
				break;
		case 3: $("#formWork").hide();
				$("#formScene").hide();
				$("#formBuildPlacemark").fadeIn();
				break;
	}
};



		</script>
		<!-- HTML5 shim and Respond.js 讓 IE8 支援 HTML5 元素與媒體查詢 -->
		<!-- 警告：Respond.js 無法在 file:// 協定下運作 -->
		<!--[if lt IE 9]>
		<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
		<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->
	</head>
	<body onLoad="init();">
	<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
		<div class="container-fluid">
			<div class="navbar-header">
				<a class="navbar-brand" href="#">
					<span class="glyphicon glyphicon-home"></span>
				</a>
				<!--
				<a class="navbar-brand" href="#">Logo
					<img alt="Logo" src="#"> 
				</a>
				-->
				<from class="navbar-form navbar-left form-inline" role="search">
					<div class="form-group">
						<div class="input-group">
							<input type="text" class="form-control" style="width: 500px;">
				   			<span class="input-group-btn">
				   				<button type="button" class="btn btn-default btn-md">找作品
				   				<span class="glyphicon glyphicon-search" aria-hidden="true">
				   				</span></button>
				   			</span>
			   			</div>
		   			</div>
	  			</from>
			</div>
			<ul class="nav navbar-nav navbar-right" id="user_bar">
				<li><a href="#"><span class="glyphicon glyphicon-log-in"></span> Log in</a></li>
			</ul>
		</div>
	</nav>
	<br>
	<div class="container">
   		<div class="row">
   			<ul class="nav nav-tabs">
   				<li role="presentation" class="active"><a href="javascript:showForm(1)">編輯作品</a></li>
   				<li role="presentation" class="active"><a href="javascript:showForm(2)">編輯場景</a></li>
   				<li role="presentation" class="active"><a href="javascript:showForm(3)">編輯座標</a></li>
   			</ul><br>
   			<div class="col-md-6" id="DisplayBlock">
   				<form role="form" action="/manage/submitWork" method="post" id="formWork">
					<label class="radio-inline">
						<input type="radio" name="rdoWork" id="rdoWorkAdd" value="add">新增
					</label>
					<label class="radio-inline">
						<input type="radio" name="rdoWork" id="rdoWorkEdit" value="edit">編輯
					</label>
					<label class="radio-inline">
						<input type="radio" name="rdoWork" id="rdoWorkDel" value="del" disabled>刪除
					</label>
					<label class="radio-inline" style="width: 200px;">
						<select name="selectEditWork" id="selectEditWork" class="form-control" disabled>
						<% for(var index in workList) {%>
		 				<option value="<%= workList[index]._id %>"><%= workList[index].c_name %></option>
		   				<% } %>
						</select>
					</label><br><br>
				   	<label class="control-label" for="workJName">作品名稱（日文）</label>
			   		<input type="text" class="form-control" name="workJName"><br>
			   		<label class="control-label" for="workCName">作品名稱（中文）</label>
			   		<input type="text" class="form-control" name="workCName"><br>
			   		<label class="control-label" for="workEName">作品名稱（英文）</label>
			   		<input type="text" class="form-control" name="workEName"><br>
					<label class="control-label" for="workIntr">簡介</label>
					<textarea class="form-control" name="workIntr" rows="5"></textarea><br>
		   			<button type="submit" class="btn btn-default" id="btnSubmitWork">送出</button>
   				</form>
   				<form role="form" action="/manage/submitScene" method="post" id="formScene">
   					<label class="radio-inline">
						<input type="radio" name="rdoScene" id="rdoSceneAdd" value="add">新增
					</label>
					<label class="radio-inline">
						<input type="radio" name="rdoScene" id="rdoSceneEdit" value="edit">編輯
					</label>
					<label class="radio-inline">
						<input type="radio" name="rdoScene" id="rdoSceneDel" value="del" disabled>刪除
					</label>
					<label class="radio-inline" style="width: 200px;">
						<select name="selectEditScene" id="selectEditScene" class="form-control" disabled>
						<% for(var index in sceneList) {%>
		 				<option value="<%= sceneList[index]._id %>"><%= sceneList[index].name %></option>
		   				<% } %>
						</select>
					</label><br><br>
		   			<label class="control-label" for="sceneName">景點名稱</label>
		   			<input type="text" class="form-control" name="sceneName"><br>
		   			<label class="control-label" for="latNum">緯度(latitude)</label>
		   			<input type="text" class="form-control" name="latNum"><br>
		   			<label class="control-label" or="longNum">經度(longitude)</label>
		   			<input type="text" class="form-control" name="lngNum"><br>
		   			<label class="control-label" for="sceneDesc">描述</label>
					<textarea class="form-control" name="sceneDesc" rows="5"></textarea><br>
	   				<button type="submit" class="btn btn-default" id="btnSubmitScene">送出</button>
   				</form>
   				<form role="form" action="/manage/submitPlacemark" method="post" id="formBuildPlacemark">
		   			<label class="control-label" for="selectWork">選擇作品</label>
		   			<select class="form-control" name="selectWork">
		   			<% for(var index in workList) {%>
		   				<option value="<%= workList[index]._id %>"><%= workList[index].c_name %></option>
		   			<% } %>
		   			</select>
		   			<br>
		   			<label class="control-label" for="selectScene">選擇景點</label>
		   			<select class="form-control" name="selectScene">
		   			<% for(var index in sceneList) {%>
		   				<option value="<%= sceneList[index]._id %>"><%= sceneList[index].name %></option>
		   			<% } %>
		   			</select>
		   			<br>
	   				<button type="submit" class="btn btn-default" id="btnSubmitPlacemark">送出</button>
   				</form>
   			</div>
   		</div>
   	</div>
	</body>
</html>